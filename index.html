<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapLogic Sizing Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <img src="https://www.snaplogic.com/wp-content/uploads/2022/09/SL_logo_blue_web.png" alt="SnapLogic Logo" class="logo">
            <h1 class="main-title">SnapLogic Sizing Calculator</h1>
            <p class="subtitle">Estimate the nodes required for your SnapLogic workloads</p>
        </header>


        <div class="main-card">
            <!-- Tabs -->
            <div class="tabs-container">
                <button class="tab active" onclick="openTab(event, 'triggered')">Triggered Task</button>
                <button class="tab" onclick="openTab(event, 'ultra')">Ultra Task</button>
                <button class="tab" onclick="openTab(event, 'scheduled')">Scheduled Task</button>
                <button class="tab" onclick="openTab(event, 'headless')">Headless Ultra</button>
                <button class="tab" onclick="openTab(event, 'prediction')">Throughput Prediction</button>
            </div>

            <!-- Triggered Task Tab -->
            <div id="triggered" class="tab-content">

                <div class="form-group">
                    <label for="api-requests-triggered" class="form-label">API Requests Volume</label>
                    <input type="number" id="api-requests-triggered" value="300000000" class="form-input">
                    <div class="unit-selector" data-target="api-requests-triggered" data-calculator="triggered">
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perSecond')">Per Second</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perMinute')">Per Minute</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perHour')">Per Hour</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perDay')">Per Day</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perMonth')">Per Month</button>
                        <button type="button" class="unit-button active" onclick="updateUnit(this, 'perYear')">Per Year</button>
                    </div>
                </div>

                <div class="form-group">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label for="coverage-days-triggered" class="form-label-small">Usage Days per Month</label>
                            <input type="number" id="coverage-days-triggered" value="30" class="form-input">
                        </div>
                        <div>
                            <label for="coverage-hours-triggered" class="form-label-small">Usage Hours per Day</label>
                            <input type="number" id="coverage-hours-triggered" value="24" class="form-input">
                        </div>
                        <div>
                            <label for="peak-triggered" class="form-label-small">Peak Load (%)</label>
                            <input type="number" id="peak-triggered" value="150" class="form-input">
                        </div>
                        <div>
                            <label for="complexity-triggered" class="form-label-small">Complexity</label>
                            <select id="complexity-triggered" class="form-select">
                                <option value="simple" selected>Simple</option>
                                <option value="moderate">Moderate</option>
                                <option value="complex">Complex</option>
                                <option value="veryComplex">Very Complex</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-radius: 1rem; border: 2px solid #e2e8f0;">
                    <button class="btn btn-primary" onclick="calculateTriggered()">Calculate Triggered Task Sizing</button>
                    <div style="margin-top: 1rem;">
                        <div class="toggle-container">
                            <span class="toggle-label">Detailed View</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="detailed-view-toggle" onchange="toggleDetailedView()">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="results-container">
                    <div id="result-triggered"></div>
                </div>
            </div>

            <!-- Ultra Task Tab -->
            <div id="ultra" class="tab-content hidden">

                <div class="form-group">
                    <label for="api-requests-ultra" class="form-label">API Requests Volume</label>
                    <input type="number" id="api-requests-ultra" value="100000000" class="form-input">
                    <div class="unit-selector" data-target="api-requests-ultra" data-calculator="ultra">
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perSecond')">Per Second</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perMinute')">Per Minute</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perHour')">Per Hour</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perDay')">Per Day</button>
                        <button type="button" class="unit-button" onclick="updateUnit(this, 'perMonth')">Per Month</button>
                        <button type="button" class="unit-button active" onclick="updateUnit(this, 'perYear')">Per Year</button>
                    </div>
                </div>

                <div class="form-group">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label for="coverage-days-ultra" class="form-label-small">Usage Days per Month</label>
                            <input type="number" id="coverage-days-ultra" value="30" class="form-input">
                        </div>
                        <div>
                            <label for="coverage-hours-ultra" class="form-label-small">Usage Hours per Day</label>
                            <input type="number" id="coverage-hours-ultra" value="24" class="form-input">
                        </div>
                        <div>
                            <label for="peak-ultra" class="form-label-small">Peak Load (%)</label>
                            <input type="number" id="peak-ultra" value="150" class="form-input">
                        </div>
                        <div>
                            <label for="complexity-ultra" class="form-label-small">Complexity</label>
                            <select id="complexity-ultra" class="form-select">
                                <option value="simple" selected>Simple</option>
                                <option value="moderate">Moderate</option>
                                <option value="complex">Complex</option>
                                <option value="veryComplex">Very Complex</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-radius: 1rem; border: 2px solid #e2e8f0;">
                    <button class="btn btn-primary" onclick="calculateUltra()">Calculate Ultra Task Sizing</button>
                    <div style="margin-top: 1rem;">
                        <div class="toggle-container">
                            <span class="toggle-label">Detailed View</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="detailed-view-toggle-ultra" onchange="toggleDetailedView()">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="results-container">
                    <div id="result-ultra"></div>
                </div>
            </div>

            <!-- Scheduled Task Tab -->
            <div id="scheduled" class="tab-content hidden">

                <div class="form-group">
                    <label id="batch-size-label" for="batch-size" class="form-label">Batch Size (GB)</label>
                    <div class="toggle-container">
                        <span class="toggle-label">Toggle to Rows</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-switch-scheduled" onchange="toggleBatchMode()">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <input type="number" id="batch-size" value="300" class="form-input">
                </div>

                <div class="form-group">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label for="process-time" class="form-label-small">Batch Window (Hours)</label>
                            <input type="number" id="process-time" value="12" class="form-input">
                        </div>
                        <div>
                            <label for="complexity-multiplier" class="form-label-small">Transformation Complexity</label>
                            <select id="complexity-multiplier" class="form-select">
                                <option value="1" selected>Simple (1x)</option>
                                <option value="1.25">Moderate (1.25x)</option>
                                <option value="1.5">Complex (1.5x)</option>
                                <option value="2">Very Complex (2x)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-radius: 1rem; border: 2px solid #e2e8f0;">
                    <button class="btn btn-primary" onclick="calculateScheduled()">Calculate Scheduled Task Sizing</button>
                    <div style="margin-top: 1rem;">
                        <div class="toggle-container">
                            <span class="toggle-label">Detailed View</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="detailed-view-toggle-scheduled" onchange="toggleDetailedView()">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="results-container">
                    <div id="result-scheduled"></div>
                </div>
            </div>

            <!-- Headless Ultra Tab -->
            <div id="headless" class="tab-content hidden">

                <div class="special-section">
                    <label class="form-label">Sizing Method</label>
                    <div class="toggle-container">
                        <span class="toggle-label">Data Volume / Event Freq.</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-switch-headless" onchange="toggleHeadlessMode()" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Event Frequency Mode -->
                <div id="headless-microbatching-on">
                    <div class="form-group">
                        <label for="events-headless" class="form-label">Event Volume</label>
                        <input type="number" id="events-headless" value="20000000" class="form-input">
                        <div class="unit-selector" data-target="events-headless" data-calculator="headless">
                            <button type="button" class="unit-button" onclick="updateUnit(this, 'perSecond')">Per Second</button>
                            <button type="button" class="unit-button" onclick="updateUnit(this, 'perMinute')">Per Minute</button>
                            <button type="button" class="unit-button" onclick="updateUnit(this, 'perHour')">Per Hour</button>
                            <button type="button" class="unit-button active" onclick="updateUnit(this, 'perDay')">Per Day</button>
                            <button type="button" class="unit-button" onclick="updateUnit(this, 'perMonth')">Per Month</button>
                            <button type="button" class="unit-button" onclick="updateUnit(this, 'perYear')">Per Year</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div>
                                <label for="coverage-hours-headless-on" class="form-label-small">Usage Hours per Day</label>
                                <input type="number" id="coverage-hours-headless-on" value="24" class="form-input">
                            </div>
                            <div>
                                <label for="peak-headless-on" class="form-label-small">Peak Load (%)</label>
                                <input type="number" id="peak-headless-on" value="150" class="form-input">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Volume Mode -->
                <div id="headless-microbatching-off" class="hidden">
                    <div class="form-group">
                        <label for="events-headless-off" class="form-label">Event Volume (Per Day)</label>
                        <input type="number" id="events-headless-off" value="20000000" class="form-input">
                    </div>

                    <div class="form-group">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div>
                                <label for="event-size-headless" class="form-label-small">Avg. Message Size (Bytes)</label>
                                <input type="number" id="event-size-headless" value="2000" class="form-input">
                            </div>
                            <div>
                                <label for="coverage-hours-headless-off" class="form-label-small">Usage Hours per Day</label>
                                <input type="number" id="coverage-hours-headless-off" value="24" class="form-input">
                            </div>
                            <div>
                                <label for="peak-headless-off" class="form-label-small">Peak Load (%)</label>
                                <input type="number" id="peak-headless-off" value="150" class="form-input">
                            </div>
                            <div>
                                <label for="complexity-headless" class="form-label-small">Complexity Multiplier</label>
                                <input type="number" id="complexity-headless" value="1" step="0.1" class="form-input">
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-radius: 1rem; border: 2px solid #e2e8f0;">
                    <button class="btn btn-primary" onclick="calculateHeadlessUltra()">Calculate Headless Task Sizing</button>
                    <div style="margin-top: 1rem;">
                        <div class="toggle-container">
                            <span class="toggle-label">Detailed View</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="detailed-view-toggle-headless" onchange="toggleDetailedView()">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="results-container">
                    <div id="result-headless"></div>
                </div>
            </div>

            <!-- Throughput Prediction Tab -->
            <div id="prediction" class="tab-content hidden">

                <div class="form-group">
                    <label for="prediction-task-type" class="form-label">Workload Type</label>
                    <select id="prediction-task-type" onchange="updatePredictionForm()" class="form-select">
                        <option value="triggered">Triggered Task</option>
                        <option value="ultra">Ultra Task</option>
                        <option value="scheduled">Scheduled Task</option>
                        <option value="headless">Headless Ultra</option>
                    </select>
                </div>

                <div id="prediction-headless-mode-container" class="form-group hidden">
                    <label for="prediction-headless-mode" class="form-label">Headless Sizing Method</label>
                    <select id="prediction-headless-mode" class="form-select">
                        <option value="eventFrequency">Event Frequency</option>
                        <option value="dataVolume">Data Volume</option>
                    </select>
                </div>

                <div id="prediction-standard-inputs">
                    <div class="form-group">
                        <label for="prediction-node-count" class="form-label">Number of Nodes</label>
                        <input type="number" id="prediction-node-count" value="3" class="form-input">
                    </div>
                </div>

                <div id="prediction-ultra-inputs" class="form-group hidden">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label for="prediction-exec-nodes" class="form-label">Execution Nodes</label>
                            <input type="number" id="prediction-exec-nodes" value="3" class="form-input">
                        </div>
                        <div>
                            <label for="prediction-fm-nodes" class="form-label">FeedMaster Nodes</label>
                            <input type="number" id="prediction-fm-nodes" value="3" class="form-input">
                        </div>
                    </div>
                </div>

                <div style="display: flex; justify-content: center; align-items: center; gap: 2rem; margin: 2rem 0; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-radius: 1rem; border: 2px solid #e2e8f0;">
                    <button class="btn btn-primary" onclick="calculatePrediction()">Calculate Throughput Prediction</button>
                </div>

                <div class="results-container">
                    <div id="result-prediction"></div>
                </div>
            </div>

            <!-- Considerations Tab - Hidden for now
            <div id="considerations" class="tab-content hidden">
                <div class="considerations-section">
                    <h2 class="considerations-title">Key Sizing Considerations</h2>
                    <p class="section-text">To provide an accurate infrastructure sizing estimate, it's essential to understand the nature of your integration workloads. Use these questions as a guide to gather the necessary details before using the calculator.</p>

                    <div class="export-section">
                        <h3 class="export-title">Export Sizing Data</h3>
                        <p class="section-text">Export your sizing calculations as structured JSON data for documentation, reporting, or integration with other tools.</p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
                            <button class="btn btn-secondary" onclick="exportData('triggered')">Export Triggered Data</button>
                            <button class="btn btn-secondary" onclick="exportData('ultra')">Export Ultra Data</button>
                            <button class="btn btn-secondary" onclick="exportData('scheduled')">Export Scheduled Data</button>
                            <button class="btn btn-secondary" onclick="exportData('headless')">Export Headless Data</button>
                        </div>
                    </div>
                </div>
            </div>
            -->
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Export Data</h3>
                <button type="button" onclick="closeExportModal()" class="close-button">×</button>
            </div>
            <div>
                <pre id="export-json" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1rem; font-size: 0.75rem; max-height: 400px; overflow-y: auto;"></pre>
                <button id="copy-button" type="button" onclick="copyJsonToClipboard()" class="btn btn-primary" style="margin-top: 1rem;">Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>